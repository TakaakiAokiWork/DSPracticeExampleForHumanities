Les Miserables network analysis
================

# Setup: Library 読み込み

# Read network data file

1 Download Les Miserable network data file (GML format) from
<https://github.com/gephi/gephi/wiki/Datasets>. 2 Extract the
downloaded, zipped file.

``` r
g = read.graph("lesmiserables.gml", format="gml")
# show summary of the graph
summary(g)
```

    ## IGRAPH 626e128 U--- 77 254 -- 
    ## + attr: id (v/n), label (v/c), value (e/n)

``` r
E(g)$value
```

    ##   [1]  1  8 10  6  1  1  1  1  2  1  1  3  3  5  1  1  1  1  4  4  4  4  4  4  3
    ##  [26]  3  3  4  3  3  3  3  5  3  3  3  3  4  4  3  3  3  3  4  4  4  2  9  2  7
    ##  [51] 13  1 12  4 31  1  1 17  5  5  1  1  8  1  1  1  2  1  2  3  2  1  1  2  1
    ##  [76]  3  2  3  3  2  2  2  2  1  2  2  2  2  1  2  2  2  2  2  1  1  1  2  3  2
    ## [101]  2  1  3  1  1  3  1  2  1  2  1  1  1  3  2  1  1  9  2  2  1  1  1  2  1
    ## [126]  1  6 12  1  1 21 19  1  2  5  4  1  1  1  1  1  7  7  6  1  4 15  5  6  2
    ## [151]  1  4  2  2  6  2  5  1  1  9 17 13  7  2  1  6  3  5  5  6  2  4  3  2  1
    ## [176]  5 12  5  4 10  6  2  9  1  1  5  7  3  5  5  5  2  5  1  2  3  3  1  2  2
    ## [201]  1  1  1  1  3  5  1  1  1  1  1  6  6  1  1  2  1  1  4  4  4  1  1  1  1
    ## [226]  1  1  2  2  2  1  1  1  1  2  1  1  2  2  3  3  3  3  1  1  1  1  1  1  1
    ## [251]  1  1  1  1

``` r
V(g)$label
```

    ##  [1] "Myriel"           "Napoleon"         "MlleBaptistine"   "MmeMagloire"     
    ##  [5] "CountessDeLo"     "Geborand"         "Champtercier"     "Cravatte"        
    ##  [9] "Count"            "OldMan"           "Labarre"          "Valjean"         
    ## [13] "Marguerite"       "MmeDeR"           "Isabeau"          "Gervais"         
    ## [17] "Tholomyes"        "Listolier"        "Fameuil"          "Blacheville"     
    ## [21] "Favourite"        "Dahlia"           "Zephine"          "Fantine"         
    ## [25] "MmeThenardier"    "Thenardier"       "Cosette"          "Javert"          
    ## [29] "Fauchelevent"     "Bamatabois"       "Perpetue"         "Simplice"        
    ## [33] "Scaufflaire"      "Woman1"           "Judge"            "Champmathieu"    
    ## [37] "Brevet"           "Chenildieu"       "Cochepaille"      "Pontmercy"       
    ## [41] "Boulatruelle"     "Eponine"          "Anzelma"          "Woman2"          
    ## [45] "MotherInnocent"   "Gribier"          "Jondrette"        "MmeBurgon"       
    ## [49] "Gavroche"         "Gillenormand"     "Magnon"           "MlleGillenormand"
    ## [53] "MmePontmercy"     "MlleVaubois"      "LtGillenormand"   "Marius"          
    ## [57] "BaronessT"        "Mabeuf"           "Enjolras"         "Combeferre"      
    ## [61] "Prouvaire"        "Feuilly"          "Courfeyrac"       "Bahorel"         
    ## [65] "Bossuet"          "Joly"             "Grantaire"        "MotherPlutarch"  
    ## [69] "Gueulemer"        "Babet"            "Claquesous"       "Montparnasse"    
    ## [73] "Toussaint"        "Child1"           "Child2"           "Brujon"          
    ## [77] "MmeHucheloup"

- Label (Vertex attribute)として、登場人物名が記録されている。
- Value (Edge attribute)として、同時登場回数が記録されている。

# Plot the network data

``` r
data = toVisNetworkData(g, idToLabel = FALSE)
visNetwork(nodes = data$nodes, edges = data$edges)
```

    ## PhantomJS not found. You can install it with webshot::install_phantomjs(). If it is installed, please make sure the phantomjs executable can be found via the PATH variable.

<div class="visNetwork html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-cc78f9f412061d2c0504" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-cc78f9f412061d2c0504">{"x":{"nodes":{"id":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77],"label":["Myriel","Napoleon","MlleBaptistine","MmeMagloire","CountessDeLo","Geborand","Champtercier","Cravatte","Count","OldMan","Labarre","Valjean","Marguerite","MmeDeR","Isabeau","Gervais","Tholomyes","Listolier","Fameuil","Blacheville","Favourite","Dahlia","Zephine","Fantine","MmeThenardier","Thenardier","Cosette","Javert","Fauchelevent","Bamatabois","Perpetue","Simplice","Scaufflaire","Woman1","Judge","Champmathieu","Brevet","Chenildieu","Cochepaille","Pontmercy","Boulatruelle","Eponine","Anzelma","Woman2","MotherInnocent","Gribier","Jondrette","MmeBurgon","Gavroche","Gillenormand","Magnon","MlleGillenormand","MmePontmercy","MlleVaubois","LtGillenormand","Marius","BaronessT","Mabeuf","Enjolras","Combeferre","Prouvaire","Feuilly","Courfeyrac","Bahorel","Bossuet","Joly","Grantaire","MotherPlutarch","Gueulemer","Babet","Claquesous","Montparnasse","Toussaint","Child1","Child2","Brujon","MmeHucheloup"]},"edges":{"from":[1,1,1,3,1,1,1,1,1,1,11,4,3,1,12,12,12,12,17,17,18,17,18,19,17,18,19,20,17,18,19,20,21,17,18,19,20,21,22,17,18,19,20,21,22,23,13,12,24,12,25,24,12,25,12,17,26,12,24,26,25,27,12,28,24,28,12,24,31,12,24,28,12,12,28,12,30,12,35,30,35,36,12,30,35,36,37,12,30,35,36,37,38,12,30,26,26,25,26,42,26,25,12,27,28,29,12,29,47,48,26,28,12,27,12,50,25,50,27,12,52,40,52,52,50,27,52,50,40,55,27,12,17,26,42,49,50,56,56,42,49,56,49,28,58,12,59,56,49,58,49,59,60,49,59,61,60,58,56,56,59,60,49,58,42,62,61,60,49,63,58,59,62,61,56,56,63,49,64,59,62,61,60,58,12,64,65,49,63,59,62,61,60,58,56,65,59,60,63,66,49,64,62,61,58,26,12,25,28,49,42,26,69,12,25,28,49,42,26,70,69,12,25,28,42,59,28,70,69,71,12,49,42,26,27,28,12,49,49,74,70,69,26,49,42,71,72,65,66,67,64,63,49,59],"to":[2,3,4,4,5,6,7,8,9,10,12,12,12,12,13,14,15,16,18,19,19,20,20,20,21,21,21,21,22,22,22,22,22,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,25,25,26,26,26,27,27,27,27,28,28,28,28,28,29,29,30,30,30,31,32,32,32,32,33,34,34,35,35,36,36,36,37,37,37,37,38,38,38,38,38,39,39,39,39,39,39,40,41,42,42,43,43,43,44,44,44,45,45,46,48,49,49,49,49,50,50,51,51,52,52,52,53,53,54,55,55,55,56,56,56,56,56,56,56,56,56,56,57,57,58,58,58,59,59,59,59,59,60,60,60,60,61,61,61,62,62,62,62,62,62,63,63,63,63,63,63,63,63,64,64,64,64,64,64,64,64,65,65,65,65,65,65,65,65,65,65,66,66,66,66,66,66,66,66,66,66,67,67,67,67,67,67,67,67,67,68,69,69,69,69,69,69,70,70,70,70,70,70,70,71,71,71,71,71,71,71,71,72,72,72,72,72,72,72,72,73,73,73,74,75,75,76,76,76,76,76,76,76,77,77,77,77,77,77,77],"value":[1,8,10,6,1,1,1,1,2,1,1,3,3,5,1,1,1,1,4,4,4,4,4,4,3,3,3,4,3,3,3,3,5,3,3,3,3,4,4,3,3,3,3,4,4,4,2,9,2,7,13,1,12,4,31,1,1,17,5,5,1,1,8,1,1,1,2,1,2,3,2,1,1,2,1,3,2,3,3,2,2,2,2,1,2,2,2,2,1,2,2,2,2,2,1,1,1,2,3,2,2,1,3,1,1,3,1,2,1,2,1,1,1,3,2,1,1,9,2,2,1,1,1,2,1,1,6,12,1,1,21,19,1,2,5,4,1,1,1,1,1,7,7,6,1,4,15,5,6,2,1,4,2,2,6,2,5,1,1,9,17,13,7,2,1,6,3,5,5,6,2,4,3,2,1,5,12,5,4,10,6,2,9,1,1,5,7,3,5,5,5,2,5,1,2,3,3,1,2,2,1,1,1,1,3,5,1,1,1,1,1,6,6,1,1,2,1,1,4,4,4,1,1,1,1,1,1,2,2,2,1,1,1,1,2,1,1,2,2,3,3,3,3,1,1,1,1,1,1,1,1,1,1,1]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot"},"manipulation":{"enabled":false}},"groups":null,"width":null,"height":null,"idselection":{"enabled":false},"byselection":{"enabled":false},"main":null,"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)"},"evals":[],"jsHooks":[]}</script>

# Centrality (中心性)

## Betweenness

``` r
data = toVisNetworkData(g, idToLabel = FALSE)
data$nodes$value = betweenness(g,directed=FALSE) # 中心性スコアに応じてノードの大きさを変える
visNetwork(nodes = data$nodes, edges = data$edges)
```

<div class="visNetwork html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-4d88019a80acbd8602f1" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-4d88019a80acbd8602f1">{"x":{"nodes":{"id":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77],"label":["Myriel","Napoleon","MlleBaptistine","MmeMagloire","CountessDeLo","Geborand","Champtercier","Cravatte","Count","OldMan","Labarre","Valjean","Marguerite","MmeDeR","Isabeau","Gervais","Tholomyes","Listolier","Fameuil","Blacheville","Favourite","Dahlia","Zephine","Fantine","MmeThenardier","Thenardier","Cosette","Javert","Fauchelevent","Bamatabois","Perpetue","Simplice","Scaufflaire","Woman1","Judge","Champmathieu","Brevet","Chenildieu","Cochepaille","Pontmercy","Boulatruelle","Eponine","Anzelma","Woman2","MotherInnocent","Gribier","Jondrette","MmeBurgon","Gavroche","Gillenormand","Magnon","MlleGillenormand","MmePontmercy","MlleVaubois","LtGillenormand","Marius","BaronessT","Mabeuf","Enjolras","Combeferre","Prouvaire","Feuilly","Courfeyrac","Bahorel","Bossuet","Joly","Grantaire","MotherPlutarch","Gueulemer","Babet","Claquesous","Montparnasse","Toussaint","Child1","Child2","Brujon","MmeHucheloup"],"value":[504,0,0,0,0,0,0,0,0,0,0,1624.468800433313,0,0,0,0,115.793642305407,0,0,0,0,0,0,369.4869418163536,82.65689338181602,213.4684805175904,67.81932234432234,154.8449450446354,75.5,22.91666666666667,0,24.62484084542908,0,0,0,0,0,0,0,19.7375,0,32.73951936436456,0,0,0,0,0,75,470.5706319136659,57.60027151211361,0.6190476190476191,135.6569444444445,1,0,0,376.2925925725461,0,78.8345238095238,121.2770669432047,3.562914862914862,0,3.562914862914862,15.01103516366674,6.22864167995747,87.64790301287979,6.22864167995747,0.4285714285714285,0,14.13709433841013,14.13709433841013,13.85614195745775,11.04041514041514,0,0,0,1.25,0]},"edges":{"from":[1,1,1,3,1,1,1,1,1,1,11,4,3,1,12,12,12,12,17,17,18,17,18,19,17,18,19,20,17,18,19,20,21,17,18,19,20,21,22,17,18,19,20,21,22,23,13,12,24,12,25,24,12,25,12,17,26,12,24,26,25,27,12,28,24,28,12,24,31,12,24,28,12,12,28,12,30,12,35,30,35,36,12,30,35,36,37,12,30,35,36,37,38,12,30,26,26,25,26,42,26,25,12,27,28,29,12,29,47,48,26,28,12,27,12,50,25,50,27,12,52,40,52,52,50,27,52,50,40,55,27,12,17,26,42,49,50,56,56,42,49,56,49,28,58,12,59,56,49,58,49,59,60,49,59,61,60,58,56,56,59,60,49,58,42,62,61,60,49,63,58,59,62,61,56,56,63,49,64,59,62,61,60,58,12,64,65,49,63,59,62,61,60,58,56,65,59,60,63,66,49,64,62,61,58,26,12,25,28,49,42,26,69,12,25,28,49,42,26,70,69,12,25,28,42,59,28,70,69,71,12,49,42,26,27,28,12,49,49,74,70,69,26,49,42,71,72,65,66,67,64,63,49,59],"to":[2,3,4,4,5,6,7,8,9,10,12,12,12,12,13,14,15,16,18,19,19,20,20,20,21,21,21,21,22,22,22,22,22,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,25,25,26,26,26,27,27,27,27,28,28,28,28,28,29,29,30,30,30,31,32,32,32,32,33,34,34,35,35,36,36,36,37,37,37,37,38,38,38,38,38,39,39,39,39,39,39,40,41,42,42,43,43,43,44,44,44,45,45,46,48,49,49,49,49,50,50,51,51,52,52,52,53,53,54,55,55,55,56,56,56,56,56,56,56,56,56,56,57,57,58,58,58,59,59,59,59,59,60,60,60,60,61,61,61,62,62,62,62,62,62,63,63,63,63,63,63,63,63,64,64,64,64,64,64,64,64,65,65,65,65,65,65,65,65,65,65,66,66,66,66,66,66,66,66,66,66,67,67,67,67,67,67,67,67,67,68,69,69,69,69,69,69,70,70,70,70,70,70,70,71,71,71,71,71,71,71,71,72,72,72,72,72,72,72,72,73,73,73,74,75,75,76,76,76,76,76,76,76,77,77,77,77,77,77,77],"value":[1,8,10,6,1,1,1,1,2,1,1,3,3,5,1,1,1,1,4,4,4,4,4,4,3,3,3,4,3,3,3,3,5,3,3,3,3,4,4,3,3,3,3,4,4,4,2,9,2,7,13,1,12,4,31,1,1,17,5,5,1,1,8,1,1,1,2,1,2,3,2,1,1,2,1,3,2,3,3,2,2,2,2,1,2,2,2,2,1,2,2,2,2,2,1,1,1,2,3,2,2,1,3,1,1,3,1,2,1,2,1,1,1,3,2,1,1,9,2,2,1,1,1,2,1,1,6,12,1,1,21,19,1,2,5,4,1,1,1,1,1,7,7,6,1,4,15,5,6,2,1,4,2,2,6,2,5,1,1,9,17,13,7,2,1,6,3,5,5,6,2,4,3,2,1,5,12,5,4,10,6,2,9,1,1,5,7,3,5,5,5,2,5,1,2,3,3,1,2,2,1,1,1,1,3,5,1,1,1,1,1,6,6,1,1,2,1,1,4,4,4,1,1,1,1,1,1,2,2,2,1,1,1,1,2,1,1,2,2,3,3,3,3,1,1,1,1,1,1,1,1,1,1,1]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot"},"manipulation":{"enabled":false}},"groups":null,"width":null,"height":null,"idselection":{"enabled":false},"byselection":{"enabled":false},"main":null,"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)"},"evals":[],"jsHooks":[]}</script>

## PageRank

``` r
data = toVisNetworkData(g, idToLabel = FALSE)
data$nodes$value = page_rank(g)$vector # 中心性スコアに応じてノードの大きさを変える
visNetwork(nodes = data$nodes, edges = data$edges)
```

<div class="visNetwork html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-46300d8517739c23ccdd" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-46300d8517739c23ccdd">{"x":{"nodes":{"id":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77],"label":["Myriel","Napoleon","MlleBaptistine","MmeMagloire","CountessDeLo","Geborand","Champtercier","Cravatte","Count","OldMan","Labarre","Valjean","Marguerite","MmeDeR","Isabeau","Gervais","Tholomyes","Listolier","Fameuil","Blacheville","Favourite","Dahlia","Zephine","Fantine","MmeThenardier","Thenardier","Cosette","Javert","Fauchelevent","Bamatabois","Perpetue","Simplice","Scaufflaire","Woman1","Judge","Champmathieu","Brevet","Chenildieu","Cochepaille","Pontmercy","Boulatruelle","Eponine","Anzelma","Woman2","MotherInnocent","Gribier","Jondrette","MmeBurgon","Gavroche","Gillenormand","Magnon","MlleGillenormand","MmePontmercy","MlleVaubois","LtGillenormand","Marius","BaronessT","Mabeuf","Enjolras","Combeferre","Prouvaire","Feuilly","Courfeyrac","Bahorel","Bossuet","Joly","Grantaire","MotherPlutarch","Gueulemer","Babet","Claquesous","Montparnasse","Toussaint","Child1","Child2","Brujon","MmeHucheloup"],"value":[0.04277928102271211,0.005584290834982479,0.01027713462973784,0.01027713462973784,0.005584290834982478,0.005584290834982478,0.005584290834982478,0.005584290834982479,0.005584290834982478,0.005584290834982479,0.003729040931048254,0.07543012163278467,0.005260327543023243,0.003729040931048253,0.003729040931048252,0.003729040931048256,0.01564742736848247,0.01261820291410778,0.01261820291410778,0.01261820291410778,0.01261820291410778,0.01261820291410778,0.01261820291410778,0.02702270491720568,0.01950113469106109,0.02792652569403349,0.02061121508485762,0.03030273590581358,0.01163804787364402,0.01557626472102227,0.005407488540755637,0.009073646968135066,0.003729040931048252,0.005244177726338933,0.01242465936382355,0.01242465936382355,0.01242465936382355,0.01242465936382355,0.01242465936382355,0.007368097201041262,0.003431648625547479,0.01779391186324403,0.006313538586561965,0.006836862528350659,0.00620212610419761,0.004421137121201304,0.005265424107402576,0.007805581551413241,0.03576731819472974,0.01495747558139703,0.005271222702569815,0.01626020862966738,0.006010133393378009,0.003922505853082987,0.008713597430429629,0.03089493621512295,0.005146458723386862,0.01747802229075102,0.02188203332814452,0.01589212469810008,0.01314588077600945,0.01589212469810008,0.01857844249302667,0.017199878018386,0.01895953011022144,0.017199878018386,0.01445666947309403,0.0032986263977918,0.01669183803628071,0.01669183803628071,0.01656102031879293,0.01517092849358999,0.006836862528350663,0.005791254017601826,0.005791254017601827,0.0118666609426886,0.01068982514084852]},"edges":{"from":[1,1,1,3,1,1,1,1,1,1,11,4,3,1,12,12,12,12,17,17,18,17,18,19,17,18,19,20,17,18,19,20,21,17,18,19,20,21,22,17,18,19,20,21,22,23,13,12,24,12,25,24,12,25,12,17,26,12,24,26,25,27,12,28,24,28,12,24,31,12,24,28,12,12,28,12,30,12,35,30,35,36,12,30,35,36,37,12,30,35,36,37,38,12,30,26,26,25,26,42,26,25,12,27,28,29,12,29,47,48,26,28,12,27,12,50,25,50,27,12,52,40,52,52,50,27,52,50,40,55,27,12,17,26,42,49,50,56,56,42,49,56,49,28,58,12,59,56,49,58,49,59,60,49,59,61,60,58,56,56,59,60,49,58,42,62,61,60,49,63,58,59,62,61,56,56,63,49,64,59,62,61,60,58,12,64,65,49,63,59,62,61,60,58,56,65,59,60,63,66,49,64,62,61,58,26,12,25,28,49,42,26,69,12,25,28,49,42,26,70,69,12,25,28,42,59,28,70,69,71,12,49,42,26,27,28,12,49,49,74,70,69,26,49,42,71,72,65,66,67,64,63,49,59],"to":[2,3,4,4,5,6,7,8,9,10,12,12,12,12,13,14,15,16,18,19,19,20,20,20,21,21,21,21,22,22,22,22,22,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,25,25,26,26,26,27,27,27,27,28,28,28,28,28,29,29,30,30,30,31,32,32,32,32,33,34,34,35,35,36,36,36,37,37,37,37,38,38,38,38,38,39,39,39,39,39,39,40,41,42,42,43,43,43,44,44,44,45,45,46,48,49,49,49,49,50,50,51,51,52,52,52,53,53,54,55,55,55,56,56,56,56,56,56,56,56,56,56,57,57,58,58,58,59,59,59,59,59,60,60,60,60,61,61,61,62,62,62,62,62,62,63,63,63,63,63,63,63,63,64,64,64,64,64,64,64,64,65,65,65,65,65,65,65,65,65,65,66,66,66,66,66,66,66,66,66,66,67,67,67,67,67,67,67,67,67,68,69,69,69,69,69,69,70,70,70,70,70,70,70,71,71,71,71,71,71,71,71,72,72,72,72,72,72,72,72,73,73,73,74,75,75,76,76,76,76,76,76,76,77,77,77,77,77,77,77],"value":[1,8,10,6,1,1,1,1,2,1,1,3,3,5,1,1,1,1,4,4,4,4,4,4,3,3,3,4,3,3,3,3,5,3,3,3,3,4,4,3,3,3,3,4,4,4,2,9,2,7,13,1,12,4,31,1,1,17,5,5,1,1,8,1,1,1,2,1,2,3,2,1,1,2,1,3,2,3,3,2,2,2,2,1,2,2,2,2,1,2,2,2,2,2,1,1,1,2,3,2,2,1,3,1,1,3,1,2,1,2,1,1,1,3,2,1,1,9,2,2,1,1,1,2,1,1,6,12,1,1,21,19,1,2,5,4,1,1,1,1,1,7,7,6,1,4,15,5,6,2,1,4,2,2,6,2,5,1,1,9,17,13,7,2,1,6,3,5,5,6,2,4,3,2,1,5,12,5,4,10,6,2,9,1,1,5,7,3,5,5,5,2,5,1,2,3,3,1,2,2,1,1,1,1,3,5,1,1,1,1,1,6,6,1,1,2,1,1,4,4,4,1,1,1,1,1,1,2,2,2,1,1,1,1,2,1,1,2,2,3,3,3,3,1,1,1,1,1,1,1,1,1,1,1]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot"},"manipulation":{"enabled":false}},"groups":null,"width":null,"height":null,"idselection":{"enabled":false},"byselection":{"enabled":false},"main":null,"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)"},"evals":[],"jsHooks":[]}</script>

# Community detection (グループ分け)

## Modulariy (Louvain method)

``` r
comm = cluster_louvain(g)
data = toVisNetworkData(g, idToLabel = FALSE)
data$nodes$group =  membership(comm) # Community detectionの結果で色分け
visNetwork(nodes = data$nodes, edges = data$edges) |>
  visOptions(selectedBy = "label") |> # 特定人物名に注目
  visInteraction(hideEdgesOnDrag=TRUE,  dragNodes=TRUE,  dragView=TRUE, zoomView=TRUE, navigationButtons=TRUE)  
```

<div class="visNetwork html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-fdb5b2fb11982aa7c8ee" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-fdb5b2fb11982aa7c8ee">{"x":{"nodes":{"id":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77],"label":["Myriel","Napoleon","MlleBaptistine","MmeMagloire","CountessDeLo","Geborand","Champtercier","Cravatte","Count","OldMan","Labarre","Valjean","Marguerite","MmeDeR","Isabeau","Gervais","Tholomyes","Listolier","Fameuil","Blacheville","Favourite","Dahlia","Zephine","Fantine","MmeThenardier","Thenardier","Cosette","Javert","Fauchelevent","Bamatabois","Perpetue","Simplice","Scaufflaire","Woman1","Judge","Champmathieu","Brevet","Chenildieu","Cochepaille","Pontmercy","Boulatruelle","Eponine","Anzelma","Woman2","MotherInnocent","Gribier","Jondrette","MmeBurgon","Gavroche","Gillenormand","Magnon","MlleGillenormand","MmePontmercy","MlleVaubois","LtGillenormand","Marius","BaronessT","Mabeuf","Enjolras","Combeferre","Prouvaire","Feuilly","Courfeyrac","Bahorel","Bossuet","Joly","Grantaire","MotherPlutarch","Gueulemer","Babet","Claquesous","Montparnasse","Toussaint","Child1","Child2","Brujon","MmeHucheloup"],"group":[1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,3,3,3,3,3,3,3,3,4,4,5,4,2,2,3,3,2,2,2,2,2,2,2,5,4,4,4,5,2,2,6,6,7,5,5,5,5,5,5,7,5,7,7,7,7,7,7,7,7,7,7,7,4,4,4,4,5,7,7,4,7]},"edges":{"from":[1,1,1,3,1,1,1,1,1,1,11,4,3,1,12,12,12,12,17,17,18,17,18,19,17,18,19,20,17,18,19,20,21,17,18,19,20,21,22,17,18,19,20,21,22,23,13,12,24,12,25,24,12,25,12,17,26,12,24,26,25,27,12,28,24,28,12,24,31,12,24,28,12,12,28,12,30,12,35,30,35,36,12,30,35,36,37,12,30,35,36,37,38,12,30,26,26,25,26,42,26,25,12,27,28,29,12,29,47,48,26,28,12,27,12,50,25,50,27,12,52,40,52,52,50,27,52,50,40,55,27,12,17,26,42,49,50,56,56,42,49,56,49,28,58,12,59,56,49,58,49,59,60,49,59,61,60,58,56,56,59,60,49,58,42,62,61,60,49,63,58,59,62,61,56,56,63,49,64,59,62,61,60,58,12,64,65,49,63,59,62,61,60,58,56,65,59,60,63,66,49,64,62,61,58,26,12,25,28,49,42,26,69,12,25,28,49,42,26,70,69,12,25,28,42,59,28,70,69,71,12,49,42,26,27,28,12,49,49,74,70,69,26,49,42,71,72,65,66,67,64,63,49,59],"to":[2,3,4,4,5,6,7,8,9,10,12,12,12,12,13,14,15,16,18,19,19,20,20,20,21,21,21,21,22,22,22,22,22,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,25,25,26,26,26,27,27,27,27,28,28,28,28,28,29,29,30,30,30,31,32,32,32,32,33,34,34,35,35,36,36,36,37,37,37,37,38,38,38,38,38,39,39,39,39,39,39,40,41,42,42,43,43,43,44,44,44,45,45,46,48,49,49,49,49,50,50,51,51,52,52,52,53,53,54,55,55,55,56,56,56,56,56,56,56,56,56,56,57,57,58,58,58,59,59,59,59,59,60,60,60,60,61,61,61,62,62,62,62,62,62,63,63,63,63,63,63,63,63,64,64,64,64,64,64,64,64,65,65,65,65,65,65,65,65,65,65,66,66,66,66,66,66,66,66,66,66,67,67,67,67,67,67,67,67,67,68,69,69,69,69,69,69,70,70,70,70,70,70,70,71,71,71,71,71,71,71,71,72,72,72,72,72,72,72,72,73,73,73,74,75,75,76,76,76,76,76,76,76,77,77,77,77,77,77,77],"value":[1,8,10,6,1,1,1,1,2,1,1,3,3,5,1,1,1,1,4,4,4,4,4,4,3,3,3,4,3,3,3,3,5,3,3,3,3,4,4,3,3,3,3,4,4,4,2,9,2,7,13,1,12,4,31,1,1,17,5,5,1,1,8,1,1,1,2,1,2,3,2,1,1,2,1,3,2,3,3,2,2,2,2,1,2,2,2,2,1,2,2,2,2,2,1,1,1,2,3,2,2,1,3,1,1,3,1,2,1,2,1,1,1,3,2,1,1,9,2,2,1,1,1,2,1,1,6,12,1,1,21,19,1,2,5,4,1,1,1,1,1,7,7,6,1,4,15,5,6,2,1,4,2,2,6,2,5,1,1,9,17,13,7,2,1,6,3,5,5,6,2,4,3,2,1,5,12,5,4,10,6,2,9,1,1,5,7,3,5,5,5,2,5,1,2,3,3,1,2,2,1,1,1,1,3,5,1,1,1,1,1,6,6,1,1,2,1,1,4,4,4,1,1,1,1,1,1,2,2,2,1,1,1,1,2,1,1,2,2,3,3,3,3,1,1,1,1,1,1,1,1,1,1,1]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot"},"manipulation":{"enabled":false},"interaction":{"dragNodes":true,"dragView":true,"hideEdgesOnDrag":true,"navigationButtons":true,"zoomView":true,"zoomSpeed":1}},"groups":["1","2","3","4","5","6","7"],"width":null,"height":null,"idselection":{"enabled":false,"style":"width: 150px; height: 26px","useLabels":true,"main":"Select by id"},"byselection":{"enabled":true,"style":"width: 150px; height: 26px","multiple":false,"hideColor":"rgba(200,200,200,0.5)","highlight":false,"variable":"label","main":"Select by label","values":["Anzelma","Babet","Bahorel","Bamatabois","BaronessT","Blacheville","Bossuet","Boulatruelle","Brevet","Brujon","Champmathieu","Champtercier","Chenildieu","Child1","Child2","Claquesous","Cochepaille","Combeferre","Cosette","Count","CountessDeLo","Courfeyrac","Cravatte","Dahlia","Enjolras","Eponine","Fameuil","Fantine","Fauchelevent","Favourite","Feuilly","Gavroche","Geborand","Gervais","Gillenormand","Grantaire","Gribier","Gueulemer","Isabeau","Javert","Joly","Jondrette","Judge","Labarre","Listolier","LtGillenormand","Mabeuf","Magnon","Marguerite","Marius","MlleBaptistine","MlleGillenormand","MlleVaubois","MmeBurgon","MmeDeR","MmeHucheloup","MmeMagloire","MmePontmercy","MmeThenardier","Montparnasse","MotherInnocent","MotherPlutarch","Myriel","Napoleon","OldMan","Perpetue","Pontmercy","Prouvaire","Scaufflaire","Simplice","Thenardier","Tholomyes","Toussaint","Valjean","Woman1","Woman2","Zephine"]},"main":null,"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)","highlight":{"enabled":false,"hoverNearest":false,"degree":1,"algorithm":"all","hideColor":"rgba(200,200,200,0.5)","labelOnly":true},"collapse":{"enabled":false,"fit":false,"resetHighlight":true,"clusterOptions":null,"keepCoord":true,"labelSuffix":"(cluster)"},"tooltipStay":300,"tooltipStyle":"position: fixed;visibility:hidden;padding: 5px;white-space: nowrap;font-family: verdana;font-size:14px;font-color:#000000;background-color: #f5f4ed;-moz-border-radius: 3px;-webkit-border-radius: 3px;border-radius: 3px;border: 1px solid #808074;box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.2);"},"evals":[],"jsHooks":[]}</script>
